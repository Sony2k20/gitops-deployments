immich:
  immich:
    metrics:
      # Enabling this will create the service monitors needed to monitor immich with the prometheus operator
      enabled: false
    persistence:
      library:
        existingClaim: immich
  redis:
    enabled: true
  env:
    DB_HOSTNAME: "postgresql.postgresql.svc.cluster.local"
    DB_USERNAME: immich_user
    DB_DATABASE_NAME: immich
    IMMICH_IGNORE_MOUNT_CHECK_ERRORS: true
  envFrom:
    - secretRef:
        name: immich-secret
  image:
    tag: v1.137.3
  resources:
    requests:
      memory: "128Mi"
      cpu: "250m"
    limits:
      memory: "8Gi"
      cpu: "2500m"



service:
  port: 2283
  nodePort: 30009
ingress:
  className: traefik
  annotations: 
    traefik.ingress.kubernetes.io/client-max-body-size: "0"
    traefik.ingress.kubernetes.io/router.middlewares: |
      kube-system-redirect-https@kubernetescrd
  path: /
  host: immich.csnguyen.de
  tls: 
  - secretName: csnguyen-tls
    hosts:
      - immich.csnguyen.de

